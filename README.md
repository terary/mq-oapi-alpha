# Not for production

Intended only to be proof of concept.  Made available because of the OAPI documenting features.  Client code can develop against the OAPI spec.

Code is safe to depend on OAPI documents generated by this code.

Code is **not** safe that directly depends on this code


### Future considerations:

In terms of decoupling, coupled, loosely coupled etc, this is best described as 'entangled'
The work required to make it well organized far outweighs the work required to do it right from scratch.
The basic concepts demonstrate here should be useful for development.

This was only meant to be a proof of concept and as such - it fulfills the goals 

### Moving forward:
    + utilize sequelize and several db interfaces
    + use typescript (maybe)
    + design develop separate projects: 
        monqade-express 
        OAPIDocumenter 
        WebMethods(maybe)
    + make sure (before starting) - conceptualize how monqade-express, OAPIDocumenter 
      and WebMethods will play together and well as separately.
      

# Use at your own risk.

### Examples

```bash
npm run test 					# run full test 
```
```bash
npm run test-chaos  		# run sanity test using chaos schema
```
```bash
npm run test-dictionary 	# run sanity test using dictionary schema
```
```bash
npm run server-oapi		# example of webmethod + OAPI document generation
```
```bash
npm run server-chaos	
# Example server of MonqadeExpress + OAPI Doc Gen using chaos schema 
```
```bash
npm run server-dictionary 
# Example server of MonqadeExpress + OAPI Doc Gen using dictionary schema 
```

See package.json for most up to date.

note:
chaos and dictionary are schemas that can be found:
https://github.com/terary/monqade-dev-schemas/tree/master/schemas

Part of the demonstration is to show how easy it is to change-out or develop using various schemas



---------------------------  OAPI Document Examples
~~~~~~~~~~~~~~~ Creates a simple doc ~~~~~~~~~~~~~~
const { OapiDocument } = require('../index.js');
const oapiDoc = new OapiDocument();
console.log(oapiDoc.toJSON())

~~~~~~~~~~~~~~  Create Simple Doc setting some global values 
~~~ Will need to dump doc to see all available options - should be inline with OAPI 3.0
const { OapiDocument } = require('../index.js');
const init = OapiDocument.getTemplate();
init.servers.push('example.com')
init.info.title ='My Example App '
init.info.version ='3.0.x '
const oapiDoc = new OapiDocument(init);
console.log(oapiDoc.toJSON())

~~~~~~~~~~~~~~~~~~~~~~~ Create Doc with single simple WebMethod (endpoint)

const IS_REQUIRED = true;
const { OapiDocument, FieldType, FieldTypeCollection, WebMethodOapi } = require('../index.js');


const oapiDoc = new OapiDocument();

const fields = new FieldTypeCollection();
fields.addFields(new FieldType('parameterName','string', IS_REQUIRED,{description:'Field Description'}))

const wmForeignTime = new WebMethodOapi(
    'get',              // httpMethod
    '/exampleWebMethod',     // endpoint
    'exampleWebMethod',      // operationId (unique within OAPI Doc)
    (req,res)=>{res.send('hello');},   // to be executed upon request
    fields, // inputs
    fields.as200Response(),                 // http response 
    'Summary of function',                  // human readable
    'Longer Description of function'        // human readable
    );

oapiDoc.addPath(wmForeignTime.oapiPath)

console.log(oapiDoc.toJSON())

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  Merge documents
"use strict";

const { OapiDocument } = require('../index.js');

const init = OapiDocument.getTemplate();
init.servers.push('example.com')
const serviceOapiDoc = new OapiDocument(init);


const functionOapiDoc = new OapiDocument();
functionOapiDoc.responses.add('didGood',{'200':{$ref:'#/components/schemas/Empty'}})

serviceOapiDoc.merge(functionOapiDoc)
console.log(serviceOapiDoc.toJSON());







